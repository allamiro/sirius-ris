<form class="form-element" [formGroup]="form" (ngSubmit)="onSubmit()">

  <mat-tab-group>

    <!-- PEOPLE TAB: ---------------------------------------------------------------------------------------------------------------- -->
    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon class="tab-icon">person</mat-icon>
        {{ 'users.person' | translate }} &nbsp;
        <span *ngIf="personOperation">
          <div [ngSwitch]="personOperation">
            <mat-icon *ngSwitchCase="'insert'" [matTooltip]="'users.insert_new_record' | translate" class="label-alt label-tab">add</mat-icon>
            <mat-icon *ngSwitchCase="'update'" [matTooltip]="'users.update_existing_record' | translate" class="label-info label-tab">edit</mat-icon>
          </div>
        </span>
        <mat-icon *ngIf="personTabErrors" class="validate-error-tab" [matTooltip]="'users.validation_errors' | translate">priority_high</mat-icon>
      </ng-template>

      <div formGroupName="person">
        <h2 class="form-title text-center underline-fail-alt">
          {{ 'users.person_data' | translate }}:
          <mat-icon class="label-light label-tab anonymize-button" (click)="anonymizeUser()" [matTooltip]="'users.anonymize_user' | translate">person_off</mat-icon>
        </h2>
        
        <div fxLayout="row" fxLayoutAlign="start start">
          <div class="input-wrapper divider"> <!-- start fxLayout wrapper -->
            <div class="documents">
              <h4>{{ 'users.documents' | translate }}:</h4>
              <mat-form-field appearance="fill" class="medium document_inputs">
                <mat-label>{{ 'users.document_country' | translate }}</mat-label>
                <mat-select formControlName="doc_country_code" (selectionChange)="onSetDocument(true)">
                  <div *ngFor="let currentCode of getKeys(country_codes, true)">
                    <mat-option value="{{ currentCode }}"><span class="flag-icon flag-icon-{{ country_codes[currentCode].alpha_2 | lowercase }}"></span>&nbsp;&nbsp;&nbsp;{{ country_codes[currentCode].name }}</mat-option>
                  </div>
                </mat-select>
              </mat-form-field>

              <br/>

              <mat-form-field appearance="fill" class="medium document_inputs">
                <mat-label>{{ 'users.document_type' | translate }}</mat-label>
                <mat-select formControlName="doc_type" (selectionChange)="onSetDocument(true)">
                  <div *ngFor="let currentDocType of document_types | keyvalue: unsorted">
                    <mat-option value="{{ currentDocType.key }}">{{ currentDocType.value }}</mat-option>
                  </div>
                </mat-select>
              </mat-form-field>

              <br/>

              <mat-form-field appearance="fill" class="medium document_inputs">
                <mat-label>{{ 'users.document' | translate }}</mat-label>
                <input matInput type="text" formControlName="document" [placeholder]="'users.document_placeholder' | translate" (blur)="onSetDocument()" (keyup)="validateDocument()">
              </mat-form-field>
            </div>


            <div *ngIf="getKeys(documents).length > 0" class="documents-info text-right">
              <small>{{ 'users.person_documents' | translate }}:</small><br/>
              <span *ngFor="let currentDoc of documents" >
                <span matTooltip="{{ country_codes[currentDoc.doc_country_code].name }}" class="flag-icon flag-icon-{{ country_codes[currentDoc.doc_country_code].alpha_2 | lowercase }}"></span>&nbsp;
                <span matTooltip="{{ document_types[currentDoc.doc_type] }}">
                  <span>{{ currentDoc.document }}</span>
                </span>
                <br/>
              </span>
            </div>

            <div *ngIf="this.registered_doc_type === true" class="validate-info text-right">
              <div *ngIf="this.validation_result; then thenBlock else elseBlock"></div>
              <ng-template #thenBlock><span class="label-accent" [matTooltip]="'users.document_validation_ok' | translate">{{ 'users.document_validation' | translate }}: <mat-icon class="validate-icon color-ok">done</mat-icon></span></ng-template>
              <ng-template #elseBlock><span class="label-accent" [matTooltip]="'users.document_validation_fail' | translate">{{ 'users.document_validation' | translate }}: <mat-icon class="validate-icon color-fail">clear</mat-icon></span></ng-template>
            </div>

            <div class="clear"></div>

            <hr class="dashed" /><br/>

            <h4>{{ 'users.names' | translate }}:</h4>
            <mat-form-field appearance="fill" class="medium">
              <mat-label>{{ 'users.first_name' | translate }}</mat-label>
              <input matInput icSpecialCharsWS type="text" formControlName="name_01" [placeholder]="'users.first_name_placeholder' | translate">
            </mat-form-field>

            <mat-form-field appearance="fill" class="medium">
              <mat-label>{{ 'users.second_name' | translate }}</mat-label>
              <input matInput icSpecialCharsWS type="text" formControlName="name_02" [placeholder]="'users.second_name_placeholder' | translate">
            </mat-form-field>

            <br/>

            <h4>{{ 'users.surnames' | translate }}:</h4>
            <mat-form-field appearance="fill" class="medium">
              <mat-label>{{ 'users.first_surname' | translate }}</mat-label>
              <input matInput icSpecialCharsWS type="text" formControlName="surname_01" [placeholder]="'users.first_surname_placeholder' | translate">
            </mat-form-field>

            <mat-form-field appearance="fill" class="medium">
              <mat-label>{{ 'users.second_surname' | translate }}</mat-label>
              <input matInput icSpecialCharsWS type="text" formControlName="surname_02" [placeholder]="'users.second_surname_placeholder' | translate">
            </mat-form-field>

            <hr class="dashed" /><br/>

            <h4>{{ 'users.gender' | translate }}:</h4>
            <mat-radio-group [attr.aria-label]="'users.gender' | translate" color="primary" formControlName="gender">
              <mat-radio-button [class.validate-error]="genderCheckErrors === true" (change)="genderCheckErrors = false" *ngFor="let currentGender of genderTypes | keyvalue;" value="{{ currentGender.key }}">{{ currentGender.value }}</mat-radio-button>
            </mat-radio-group>

            <br/><br/>

          </div> <!-- end fxLayout wrapper -->

          <div class="input-wrapper"> <!-- start fxLayout wrapper -->

            <h4>{{ 'users.birth_date' | translate }}:</h4>
            <mat-form-field appearance="fill" class="medium" (click)="picker.open()">
              <mat-label>{{ 'users.select_date' | translate }}</mat-label>
              <input matInput [matDatepicker]="picker" formControlName="birth_date" (keydown)="false">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
              <mat-hint align="end">{{ 'users.date_picker_hint' | translate }}</mat-hint>
            </mat-form-field>

            <br/><br/><hr class="dashed" /><br/>

            <h4>{{ 'users.contact_phone' | translate }}:</h4>
            <mat-form-field appearance="fill" class="large">
              <mat-label>{{ 'users.phone_number' | translate }}</mat-label>
              <input matInput icNumbers type="text" formControlName="phone_numbers[0]" [placeholder]="'users.phone_placeholder' | translate">
              <mat-icon matSuffix>phone</mat-icon>
              <mat-hint align="start">{{ 'users.phone_hint' | translate }}</mat-hint>
            </mat-form-field>

            <br/><br/>

            <h4>{{ 'users.alternative_contact' | translate }}:</h4>
            <mat-form-field appearance="fill" class="large">
              <mat-label>{{ 'users.phone_number' | translate }}</mat-label>
              <input matInput icNumbers type="text" formControlName="phone_numbers[1]" [placeholder]="'users.alternative_phone_placeholder' | translate">
              <mat-icon matSuffix>phone</mat-icon>
              <mat-hint align="start">{{ 'users.phone_hint' | translate }}</mat-hint>
            </mat-form-field>

          </div> <!-- end fxLayout wrapper -->
        </div>
      </div>
    </mat-tab>
    <!-- PEOPLE TAB: ---------------------------------------------------------------------------------------------------------------- -->


    <!-- USER TAB: ------------------------------------------------------------------------------------------------------------------ -->
    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon class="tab-icon">account_circle</mat-icon>
        {{ 'users.user' | translate }} &nbsp;
        <span *ngIf="userOperation">
          <div [ngSwitch]="userOperation">
            <mat-icon *ngSwitchCase="'insert'" [matTooltip]="'users.insert_new_record' | translate" class="label-alt label-tab">add</mat-icon>
            <mat-icon *ngSwitchCase="'update'" [matTooltip]="'users.update_existing_record' | translate" class="label-info label-tab">edit</mat-icon>
          </div>
        </span>
        <mat-icon *ngIf="userTabErrors" class="validate-error-tab" [matTooltip]="'users.validation_errors' | translate">priority_high</mat-icon>
      </ng-template>

      <div formGroupName="user">
        <h2 class="form-title text-center underline-fail-alt">{{ 'users.user_data' | translate }}:</h2>
        <div fxLayout="row" fxLayoutAlign="start start">
          <div class="input-wrapper divider"> <!-- start fxLayout wrapper -->

            <h4>{{ 'users.email' | translate }}:</h4>
            <mat-form-field appearance="fill" class="large">
              <mat-label>{{ 'users.email_required' | translate }}</mat-label>
              <input matInput type="text" id="IDtxtEmail" formControlName="email" [placeholder]="'users.email_placeholder' | translate" (change)="onSetEmail()">
              <mat-icon matSuffix (click)="setDefaultEmail()" [matTooltip]="'users.set_default_email' | translate">mail</mat-icon>
            </mat-form-field>

            <hr class="dashed" /><br/>

            <h4>{{ 'users.password' | translate }} <span *ngIf="userOperation == 'update'" class="label-info">{{ 'users.empty_if_no_change' | translate }}</span>:</h4>

            <mat-form-field appearance="fill" class="large">
              <mat-label>{{ 'users.password_required' | translate }}</mat-label>
              <input matInput type="password" formControlName="password" [placeholder]="'users.password_placeholder' | translate">
              <mat-hint align="start">{{ 'users.password_hint' | translate }}</mat-hint>
            </mat-form-field>

            <br/><br/>

            <mat-form-field appearance="fill" class="large">
              <mat-label>{{ 'users.password_repeat' | translate }}</mat-label>
              <input matInput type="password" formControlName="password_repeat" [placeholder]="'users.password_repeat_placeholder' | translate">
            </mat-form-field>

            <hr class="dashed" /><br/>

            <h4>{{ 'users.status' | translate }}:</h4>
            <mat-radio-group [attr.aria-label]="'users.status' | translate" color="primary" formControlName="status">
              <mat-radio-button value="true">{{ 'users.active' | translate }}</mat-radio-button>
              <mat-radio-button value="false">{{ 'users.inactive' | translate }}</mat-radio-button>
            </mat-radio-group>

            <br/><br/>

          </div> <!-- end fxLayout wrapper -->

          <div class="input-wrapper"> <!-- start fxLayout wrapper -->

            <h4>{{ 'users.professional_data' | translate }}:</h4>
            <mat-form-field appearance="fill" class="medium">
              <mat-label>{{ 'users.professional_number' | translate }}</mat-label>
              <input matInput type="text" formControlName="professional[id]" [placeholder]="'users.professional_number_placeholder' | translate">
            </mat-form-field>

            <br/>

            <mat-form-field appearance="fill" class="large">
              <mat-label>{{ 'users.description' | translate }}</mat-label>
              <input matInput type="text" formControlName="professional[description]" [placeholder]="'users.description_placeholder' | translate">
            </mat-form-field>

            <hr class="dashed" /><br/>

            <h4>{{ 'users.workload' | translate }}:</h4>
            <mat-form-field appearance="fill">
              <mat-label>{{ 'users.workload_field' | translate }}</mat-label>
              <input matInput icNumbers type="text" formControlName="professional[workload]" [placeholder]="'users.workload_placeholder' | translate">
            </mat-form-field>

            <hr class="dashed" /><br/>

            <h4>{{ 'users.on_vacation' | translate }}:</h4>
            <mat-radio-group [attr.aria-label]="'users.on_vacation' | translate" color="primary" formControlName="professional[vacation]">
              <mat-radio-button value="true">{{ 'users.yes' | translate }}</mat-radio-button>
              <mat-radio-button value="false">{{ 'users.no' | translate }}</mat-radio-button>
            </mat-radio-group>

            <br><br/>

          </div> <!-- end fxLayout wrapper -->

        </div>
      </div>
    </mat-tab>
    <!-- USER TAB: ------------------------------------------------------------------------------------------------------------------ -->


    <!-- PERMISSIONS TAB: ----------------------------------------------------------------------------------------------------------- -->
    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon class="tab-icon">admin_panel_settings</mat-icon>
        {{ 'users.permissions' | translate }} &nbsp;
        <span *ngIf="userOperation">
          <div [ngSwitch]="userOperation">
            <mat-icon *ngSwitchCase="'insert'" [matTooltip]="'users.insert_new_record' | translate" class="label-alt label-tab">add</mat-icon>
            <mat-icon *ngSwitchCase="'update'" [matTooltip]="'users.update_existing_record' | translate" class="label-info label-tab">edit</mat-icon>
          </div>
        </span>
        <mat-icon *ngIf="permissionTabErrors" class="validate-error-tab" [matTooltip]="'users.validation_errors' | translate">priority_high</mat-icon>
      </ng-template>

      <!-- 1: Superusuario, 2: Administrador -->
      <!-- Only superusers and administrators can set permissions -->
      <div class="permission-denied" [class.non-display]="sharedProp.userLogged.permissions[0].role == 1 || sharedProp.userLogged.permissions[0].role == 2">
        <mat-icon>gpp_maybe</mat-icon><br/><br/>
        {{ 'users.admin_only_permissions' | translate }}<br/>
        {{ 'users.contact_admin' | translate }}
      </div>

      <span [class.non-display]="sharedProp.userLogged.permissions[0].role !== 1 && sharedProp.userLogged.permissions[0].role !== 2">
        <h2 class="form-title text-center underline-fail-alt">{{ 'users.user_permissions' | translate }}:</h2>
        <div fxLayout="row" fxLayoutAlign="start start">
          <div class="input-wrapper divider"> <!-- start fxLayout wrapper -->

            <h4>{{ 'users.role' | translate }}:</h4>
            <mat-form-field appearance="fill" class="medium">
              <mat-label>{{ 'users.role' | translate }}</mat-label>
              <mat-select formControlName="role" (selectionChange)="userService.onSetRole($event, form)">
                <div *ngFor="let currentRole of userRoles | keyvalue">
                  <div *ngIf="currentRole.key == 1; then thenBlockRole else elseBlockRole"></div>
                  <ng-template #thenBlockRole>
                    <!--Only superuser can add Superuser role -->
                    <mat-option *ngIf="sharedProp.userLogged.permissions[0].role == 1" value="{{ currentRole.key }}">{{ currentRole.value }}</mat-option>
                  </ng-template>

                  <ng-template #elseBlockRole>
                    <mat-option value="{{ currentRole.key }}">{{ currentRole.value }}</mat-option>
                  </ng-template>
                </div>
              </mat-select>
            </mat-form-field>

            <br/><hr class="dashed" /><br/>

            <h4>{{ 'users.domain_type' | translate }}:</h4>
            <mat-radio-group [attr.aria-label]="'users.domain_type' | translate" color="primary" formControlName="domain_type">
              <mat-radio-button value ="organization" [disabled]="userService.disableRadioOrganization">{{ 'users.organization' | translate }}</mat-radio-button>
              <mat-radio-button value ="branch" [disabled]="userService.disableRadioBranch">{{ 'users.branch' | translate }}</mat-radio-button>
              <mat-radio-button value ="service" [disabled]="userService.disableRadioService">{{ 'users.service' | translate }}</mat-radio-button>
            </mat-radio-group>

            <br/><br/>

            <div [ngSwitch]="form.value.domain_type">
              <!--ORGANIZATION-->
              <span *ngSwitchCase="'organization'">
                <h4>{{ 'users.domain' | translate }}:</h4>
                <mat-form-field appearance="fill" class="large">
                  <mat-label>{{ 'users.domain' | translate }}</mat-label>
                  <mat-select formControlName="domain" [placeholder]="'users.select_domain' | translate">
                    <div *ngFor="let currentOrganization of availableOrganizations">
                      <mat-option value="{{ currentOrganization._id }}">{{ currentOrganization.short_name }} ({{ currentOrganization.name }})</mat-option>
                    </div>
                  </mat-select>
                </mat-form-field>
              </span>

              <!--BRANCH-->
              <span *ngSwitchCase="'branch'">
                <h4>{{ 'users.domain' | translate }}:</h4>
                <mat-form-field appearance="fill" class="large">
                  <mat-label>{{ 'users.domain' | translate }}</mat-label>
                  <mat-select formControlName="domain" [placeholder]="'users.select_domain' | translate">
                    <div *ngFor="let currentBranch of availableBranches">
                      <div *ngFor="let currentOrganization of availableOrganizations">
                        <mat-option *ngIf="currentBranch.fk_organization == currentOrganization._id" value="{{ currentBranch._id }}">{{ currentOrganization.short_name }} ► {{ currentBranch.short_name }} ({{ currentBranch.name }})</mat-option>
                      </div>
                    </div>
                  </mat-select>
                </mat-form-field>
              </span>

              <!--SERVICE-->
              <span *ngSwitchCase="'service'">
                <h4>{{ 'users.domain' | translate }}:</h4>
                <mat-form-field appearance="fill" class="large">
                  <mat-label>{{ 'users.domain' | translate }}</mat-label>
                  <mat-select formControlName="domain" [placeholder]="'users.select_domain' | translate">
                    <div *ngFor="let currentService of availableServices">
                      <div *ngFor="let currentBranch of availableBranches">
                        <div *ngFor="let currentOrganization of availableOrganizations">
                          <mat-option *ngIf="currentBranch.fk_organization == currentOrganization._id && currentService.fk_branch == currentBranch._id" value="{{ currentService._id }}">{{ currentOrganization.short_name }} ► {{ currentBranch.short_name }} ► {{ currentService.name }}</mat-option>
                        </div>
                      </div>
                    </div>
                  </mat-select>
                </mat-form-field>
              </span>
            </div>

            <hr class="dashed" /><br/>

            <h4>{{ 'users.particular_concessions' | translate }}:</h4>
            <div fxLayout="row" fxLayoutAlign="start start" class="item-container" formArrayName="concessions">
              <div class="input-wrapper"> <!-- start fxLayout wrapper -->
                <ng-container *ngFor="let currentConcessions of userConcessions | keyvalue: unsorted; ; let i = index;">
                  <span *ngIf="i + 1 <= getMath.ceil(getKeys(userConcessions).length / 2)">
                    <mat-checkbox color="primary" (change)="onCheckConcession($event, currentConcessions.key)">{{ currentConcessions.value }}</mat-checkbox><br/>
                  </span>
                </ng-container>
              </div> <!-- end fxLayout wrapper -->

              <div class="input-wrapper"> <!-- start fxLayout wrapper -->
                <ng-container *ngFor="let currentConcessions of userConcessions | keyvalue: unsorted; ; let i = index;">
                  <span *ngIf="i + 1 > getMath.ceil(getKeys(userConcessions).length / 2)">
                    <mat-checkbox color="primary" (change)="onCheckConcession($event, currentConcessions.key)">{{ currentConcessions.value }}</mat-checkbox><br/>
                  </span>
                </ng-container>
              </div> <!-- end fxLayout wrapper -->
            </div>

            <br/><hr class="dashed" /><br/>

            <div class="text-right">
              <button mat-flat-button type="button" color="accent" (click)="userService.addPermission(form, permissions, selectedConcession)"><mat-icon>add</mat-icon> {{ 'users.add_permission' | translate }}</button>
            </div>

            <br/>
          </div> <!-- end fxLayout wrapper -->


          <div class="input-wrapper"> <!-- start fxLayout wrapper -->
            <div *ngIf="getKeys(permissions).length > 0; then thenBlockPermissions else elseBlockPermissions"></div>

            <ng-template #thenBlockPermissions>
              <h4>{{ 'users.assigned_permissions' | translate }}:</h4>

              <div  class="permission-container">
                <ng-container *ngFor="let currentPermission of permissions; let permissionIndex = index;">

                    <!--ORGANIZATION DOMAIN-->
                    <span *ngIf="currentPermission.organization">
                      <div *ngFor="let currentOrganization of availableOrganizations">
                        <div *ngIf="currentOrganization._id == currentPermission.organization" class="permission-table">
                          <div class="permission-header">
                            <div class="permission-title">{{ userRoles[currentPermission.role] }}</div>
                            <div class="permission-button"><mat-icon [matTooltip]="'users.remove_permission' | translate" (click)="userService.removePermission(permissionIndex, permissions)">close</mat-icon></div>
                            <div class="clear"></div>
                          </div>
                          <div><strong>{{ 'users.organization' | translate }}:</strong> {{ currentOrganization.short_name }} ({{ currentOrganization.name }})</div>
                          <div><strong>{{ 'users.concessions' | translate }}: </strong>
                            <div *ngIf="currentPermission.concession && currentPermission.concession.length > 0 then thenBlockConcession else elseBlockConcession"></div>

                            <ng-template #thenBlockConcession>
                              <ng-container *ngFor="let currentConcession of currentPermission.concession;">
                                {{ userConcessions[currentConcession] + ', ' }}
                              </ng-container>
                            </ng-template>

                            <ng-template #elseBlockConcession>{{ 'users.no_concessions' | translate }}</ng-template>
                          </div>
                        </div>
                      </div>
                    </span>

                    <!--BRANCH DOMAIN-->
                    <span *ngIf="currentPermission.branch">
                      <div *ngFor="let currentBranch of availableBranches">
                        <div *ngFor="let currentOrganization of availableOrganizations">
                          <div *ngIf="currentBranch.fk_organization == currentOrganization._id && currentBranch._id == currentPermission['branch']" class="permission-table">
                            <div class="permission-header">
                              <div class="permission-title">{{ userRoles[currentPermission.role] }}</div>
                              <div class="permission-button"><mat-icon [matTooltip]="'users.remove_permission' | translate" (click)="userService.removePermission(permissionIndex, permissions)">close</mat-icon></div>
                              <div class="clear"></div>
                            </div>
                            <div><strong>{{ 'users.branch' | translate }}:</strong> {{ currentOrganization.short_name }} ► {{ currentBranch.short_name }} ({{ currentBranch.name }})</div>
                            <div><strong>{{ 'users.concessions' | translate }}: </strong>
                              <div *ngIf="currentPermission.concession && currentPermission.concession.length > 0; then thenBlockConcession else elseBlockConcession"></div>

                              <ng-template #thenBlockConcession>
                                <ng-container *ngFor="let currentConcession of currentPermission.concession;">
                                  {{ userConcessions[currentConcession] + ', ' }}
                                </ng-container>
                              </ng-template>

                              <ng-template #elseBlockConcession>{{ 'users.no_concessions' | translate }}</ng-template>
                            </div>
                          </div>
                        </div>
                      </div>
                    </span>

                    <!--SERVICE DOMAIN-->
                    <span *ngIf="currentPermission.service">
                      <div *ngFor="let currentService of availableServices">
                        <div *ngFor="let currentBranch of availableBranches">
                          <div *ngFor="let currentOrganization of availableOrganizations">
                            <div *ngIf="currentBranch.fk_organization == currentOrganization._id && currentService.fk_branch == currentBranch._id && currentService._id == currentPermission['service']" class="permission-table">
                              <div class="permission-header">
                                <div class="permission-title">{{ userRoles[currentPermission.role] }}</div>
                                <div class="permission-button"><mat-icon [matTooltip]="'users.remove_permission' | translate" (click)="userService.removePermission(permissionIndex, permissions)">close</mat-icon></div>
                                <div class="clear"></div>
                              </div>
                              <div><strong>{{ 'users.service' | translate }}:</strong> {{ currentOrganization.short_name }} ► {{ currentBranch.short_name }} ► {{ currentService.name }}</div>
                              <div><strong>{{ 'users.concessions' | translate }}: </strong>
                                <div *ngIf="currentPermission.concession && currentPermission.concession.length > 0; then thenBlockConcession else elseBlockConcession"></div>

                                <ng-template #thenBlockConcession>
                                  <ng-container *ngFor="let currentConcession of currentPermission.concession;">
                                    {{ userConcessions[currentConcession] + ', ' }}
                                  </ng-container>
                                </ng-template>

                                <ng-template #elseBlockConcession>{{ 'users.no_concessions' | translate }}</ng-template>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </span>
                </ng-container>
              </div>
            </ng-template>

            <ng-template #elseBlockPermissions>
              <br/><span class="label-accent">{{ 'users.no_permissions' | translate }}</span>
            </ng-template>

            <br/><br/>

            <div class="permission-card">
              <mat-icon>info</mat-icon>&nbsp;
              <span>{{ 'users.permission_changes_info' | translate }}</span>
            </div>

          </div> <!-- end fxLayout wrapper -->
        </div>
      </span>
    </mat-tab>
    <!-- PERMISSIONS TAB: ----------------------------------------------------------------------------------------------------------- -->

  </mat-tab-group>

  <div class="action-wrapper"fxLayout="row" fxLayoutAlign="end center">
    <div> <!-- start fxLayout wrapper -->
      <button mat-flat-button type="button" (click)="onCancel();">{{ 'users.cancel' | translate }}</button>
      <button mat-flat-button type="submit" color="primary" [disabled]="disabled_save_button">{{ 'users.save' | translate }}</button>
    </div> <!-- end fxLayout wrapper -->
  </div>
</form>
