import { Injectable, LOCALE_ID, Inject } from '@angular/core';
import { registerLocaleData } from '@angular/common';
import { BehaviorSubject } from 'rxjs';

// Import locale data
import localeEs from '@angular/common/locales/es';
import localeEn from '@angular/common/locales/en';

//--------------------------------------------------------------------------------------------------------------------//
// IMPORTS:
//--------------------------------------------------------------------------------------------------------------------//
import { SharedPropertiesService } from '@shared/services/shared-properties.service';   // Shared Properties
//--------------------------------------------------------------------------------------------------------------------//

export interface Language {
  code: string;
  name: string;
  flag: string;
}

@Injectable({
  providedIn: 'root'
})
export class I18nService {
  
  // Available languages
  public readonly languages: Language[] = [
    { code: 'es', name: 'Español', flag: 'es' },
    { code: 'en', name: 'English', flag: 'us' }
  ];
  
  // Current language subject
  private currentLanguageSubject = new BehaviorSubject<string>('es');
  public currentLanguage$ = this.currentLanguageSubject.asObservable();
  
  // Translations object
  private translations: { [key: string]: { [key: string]: string } } = {};
  
  constructor(
    @Inject(LOCALE_ID) private localeId: string,
    private sharedProp: SharedPropertiesService
  ) {
    // Register locale data
    registerLocaleData(localeEs, 'es');
    registerLocaleData(localeEn, 'en');
    
    // Load translations
    this.loadTranslations();
  }
  
  /**
   * Initialize language from runtime configuration
   */
  initializeLanguage(): void {
    const configLanguage = this.sharedProp.mainSettings?.appSettings?.language || 'es';
    this.setLanguage(configLanguage);
  }
  
  /**
   * Set current language
   */
  setLanguage(languageCode: string): void {
    if (this.languages.find(lang => lang.code === languageCode)) {
      this.currentLanguageSubject.next(languageCode);
      
      // Store in localStorage for persistence
      localStorage.setItem('sirius_language', languageCode);
    }
  }
  
  /**
   * Get current language code
   */
  getCurrentLanguage(): string {
    return this.currentLanguageSubject.value;
  }
  
  /**
   * Get language name by code
   */
  getLanguageName(code: string): string {
    const language = this.languages.find(lang => lang.code === code);
    return language ? language.name : code;
  }
  
  /**
   * Get language flag by code
   */
  getLanguageFlag(code: string): string {
    const language = this.languages.find(lang => lang.code === code);
    return language ? language.flag : 'us';
  }
  
  /**
   * Translate a key
   */
  translate(key: string, params?: { [key: string]: any }): string {
    const currentLang = this.getCurrentLanguage();
    let translation = this.translations[currentLang]?.[key] || key;
    
    // Replace parameters if provided
    if (params) {
      Object.keys(params).forEach(param => {
        translation = translation.replace(new RegExp(`{{${param}}}`, 'g'), params[param]);
      });
    }
    
    return translation;
  }
  
  /**
   * Get translations for current language
   */
  getTranslations(): { [key: string]: string } {
    const currentLang = this.getCurrentLanguage();
    return this.translations[currentLang] || {};
  }
  
  /**
   * Load translation files
   */
  private loadTranslations(): void {
    // Spanish translations
    this.translations['es'] = {
      // Common
      'common.save': 'Guardar',
      'common.cancel': 'Cancelar',
      'common.delete': 'Eliminar',
      'common.edit': 'Editar',
      'common.add': 'Agregar',
      'common.search': 'Buscar',
      'common.loading': 'Cargando...',
      'common.yes': 'Sí',
      'common.no': 'No',
      'common.close': 'Cerrar',
      'common.back': 'Atrás',
      'common.next': 'Siguiente',
      'common.previous': 'Anterior',
      'common.submit': 'Enviar',
      'common.reset': 'Restablecer',
      'common.select': 'Seleccionar',
      'common.actions': 'Acciones',
      'common.date': 'Fecha',
      'common.time': 'Hora',
      'common.name': 'Nombre',
      'common.description': 'Descripción',
      'common.status': 'Estado',
      'common.settings': 'Configuración',
      'common.language': 'Idioma',
      'common.generate_batch': 'Generar lote',
      'common.view_current_appointments': 'Ver citas en curso',
      'common.add_machine_user': 'Añadir usuario máquina',
      'common.search_criteria': 'Criterio de busqueda [RegEx]',
      'common.date_range': 'Seleccione rango de fechas',
      'common.start_date': 'Fecha inicio',
      'common.end_date': 'Fecha fin',
      'common.select_organization': 'Seleccione la organización',
      'common.clear_search': 'LIMPIAR BÚSQUEDA',
      
      // Authentication
      'auth.login': 'Iniciar Sesión',
      'auth.logout': 'Cerrar Sesión',
      'auth.username': 'Usuario',
      'auth.password': 'Contraseña',
      'auth.document': 'Documento',
      'auth.enter_document': 'Ingrese su documento',
      'auth.enter_password': 'Ingrese su contraseña',
      'auth.document_country': 'País del documento',
      'auth.document_type': 'Tipo de documento',
      'auth.remember_me': 'Recordarme',
      'auth.forgot_password': 'Olvidé mi contraseña',
      
      // Document Types
      'doc_type.national_id': 'ID Nacional (DNI, CI, CURP, RUT)',
      'doc_type.passport': 'Pasaporte',
      'doc_type.civic_credential': 'Credencial cívica',
      'doc_type.drivers_license': 'Licencia de conducir',
      'doc_type.residence_permit': 'Permiso de residencia',
      'doc_type.visa': 'Visa',
      'doc_type.temporary_document': 'Documento transitorio',
      'doc_type.anonymous_document': 'Documento anónimo',

      // User Roles
      'role.superuser': 'Superusuario',
      'role.administrator': 'Administrador',
      'role.supervisor': 'Supervisor',
      'role.doctor': 'Médico',
      'role.technician': 'Técnico',
      'role.nurse': 'Enfermero',
      'role.coordinator': 'Coordinador',
      'role.receptionist': 'Recepcionista',
      'role.patient': 'Paciente',
      'role.functional': 'Funcional',

      // Navigation
      'nav.main_menu': 'Menú principal',
      'nav.coordination': 'Coordinación',
      'nav.requests': 'Solicitudes',
      'nav.slots': 'Turnos',
      'nav.appointments': 'Citas',
      'nav.calendar': 'Calendario',
      'nav.reception': 'Recepción',
      'nav.receptions': 'Recepciones',
      'nav.realization': 'Realización',
      'nav.studies': 'Estudios',
      'nav.advanced_functions': 'Funciones avanzadas',
      'nav.advanced_search': 'Búsqueda avanzada',
      'nav.statistics': 'Estadística',
      'nav.medical_locker': 'Casillero médico',
      'nav.billing': 'Facturación',
      'nav.administrator': 'Administrador',
      'nav.system_configuration': 'Configuración de sistema',
      'nav.study_results': 'Resultado de estudios',
      'nav.dashboard': 'Escritorio',
      'nav.patients': 'Pacientes',
      'nav.reports': 'Informes',
      'nav.administration': 'Administración',
      'nav.performing': 'Realizando',
      'nav.check_in': 'Check-In',
      'nav.organizations': 'Organizaciones',
      'nav.branches': 'Sucursales',
      'nav.services': 'Servicios',
      'nav.modalities': 'Modalidades',
      'nav.equipments': 'Equipamiento',
      'nav.procedures': 'Procedimientos',
      'nav.procedure_categories': 'Categorías de procedimientos',
      'nav.pathologies': 'Patologías',
      'nav.users': 'Cuentas de usuarios',
      'nav.files': 'Archivos',

      // Welcome Page
      'welcome.title': 'Bienvenidos a Sirius RIS',
      'welcome.about': 'Acerca de',
      'welcome.description': 'Sirius RIS es un sistema de información radiológica de código abierto que fué desarrollado gracias a las siguientes tecnologías.',
      'welcome.help': 'Ayuda',
      'welcome.documentation': 'Documentación oficial en GitHub & DockerHub',
      'welcome.support': 'Servicio de soporte oficial',
      'welcome.features.simple': 'Simple, eficiente y rápido',
      'welcome.features.robust': 'Robusto, seguro y auditable',
      'welcome.features.interface': 'Interfaz opaca para respetar ambientes radiológicos',
      'welcome.features.identification': 'Identificación inequivoca de personas | ISO-3166 | UNAOID/ICAO v1.0',
      'welcome.features.privileges': 'Sistema de privilegios escalables para usuarios',
      
      // Messages
      'message.success': 'Operación exitosa',
      'message.error': 'Ha ocurrido un error',
      'message.warning': 'Advertencia',
      'message.info': 'Información',
      'message.confirm_delete': '¿Está seguro de que desea eliminar este elemento?',
      
      // System
      'system.configuration': 'Configuración del sistema',
      'system.user_settings': 'Configuración de usuario',
      'system.language_settings': 'Configuración de idioma',
      'system.description': 'Las siguientes configuraciones afectan los registros a lo largo de todo el flujo de datos y el modo de funcionamiento de la aplicación Sirius RIS.',
      'system.warning': 'En caso de no estar seguro de la maniobra a realizar, le recomendamos que consulte con el personal calificado para dicha tarea.',

      // Billing
      'billing.title': 'Listado para facturación',
      'billing.search': 'Buscar',
      'billing.date_range': 'Seleccione rango de fechas',
      'billing.flow_state': 'Flujo del elemento',
      'billing.modality': 'Modalidad',
      'billing.status': 'Estado',
      'billing.urgency': 'Urgencia',
      'billing.actions': 'Acciones',
      'billing.completed': 'Realizado',
      'billing.completion_date': 'Fecha realización',
      'billing.report_date': 'Fecha informe',
      'billing.days_elapsed': 'Días transcurridos',
      'billing.documents': 'Documentos',
      'billing.names': 'Nombres',
      'billing.surnames': 'Apellidos',
      'billing.details': 'Detalle',
      'billing.contrast': 'Contraste',
      'billing.anesthesia': 'Anestesia',
      'billing.requester': 'Solicitante',
      'billing.no_records': 'No se encontraron registros.',
      'billing.export_list': 'EXPORTAR LISTADO',
      'billing.waiting_results': 'Aguarde, aún no hay resultados.',

      // Advanced Search
      'advanced_search.title': 'Búsqueda avanzada de informes',
      'advanced_search.search': 'Buscar',
      'advanced_search.date_range': 'Seleccione rango de fechas',
      'advanced_search.flow_state': 'Flujo del elemento',
      'advanced_search.modality': 'Modalidad',
      'advanced_search.keywords': 'Buscar palabras clave:',
      'advanced_search.anamnesis': 'Anamnesis CITA:',
      'advanced_search.anamnesis_keyword': 'Buscar palabra sobre anamnesis',
      'advanced_search.report_content': 'En el contenido del INFORME:',
      'advanced_search.clinical_data': 'Dato clínico:',
      'advanced_search.clinical_keyword': 'Palabra en dato clínico',
      'advanced_search.findings': 'Hallazgos:',
      'advanced_search.findings_keyword': 'Palabra en hallazgos',
      'advanced_search.procedure': 'Procedimiento:',
      'advanced_search.procedure_keyword': 'Palabra en procedimiento',
      'advanced_search.summary': 'En suma:',
      'advanced_search.summary_keyword': 'Palabra en el en suma',
      'advanced_search.pathologies': 'Patologías del INFORME:',
      'advanced_search.pathology_list': 'Patologías:',
      'advanced_search.no_pathology_filter': 'Sin filtrar por patologías',
      'advanced_search.pathology_admin': 'Organización Administradora de patologías:',
      'advanced_search.organization': 'Organización',
      'advanced_search.involved_doctors': 'Médicos involucrados:',
      'advanced_search.requesting_doctor': 'Médico solicitante SOLICITUD:',
      'advanced_search.doctor_name': 'Nombre/s o Apellido/s del médico solicitante',
      'advanced_search.signature_auth': 'Sobre la FIRMA y AUTENTICACIÓN del INFORME:',
      'advanced_search.signed_by': 'Firmado por:',
      'advanced_search.select_signer': 'Seleccione el usuario firmante',
      'advanced_search.signer': 'Usuario firmante',
      'advanced_search.authenticated_by': 'Autenticado por:',
      'advanced_search.select_authenticator': 'Seleccione el usuario autenticador',
      'advanced_search.authenticator': 'Usuario autenticador',

      // Check-in/Reception
      'reception.title': 'Recepción de pacientes',
      'reception.search': 'Buscar',
      'reception.select_date': 'Seleccione fecha',
      'reception.modality': 'Modalidad',
      'reception.number': 'Nº',
      'reception.actions': 'Acciones',
      'reception.schedule': 'Horario',
      'reception.documents': 'Documentos',
      'reception.names': 'Nombres',
      'reception.surnames': 'Apellidos',
      'reception.age': 'Edad',
      'reception.gender': 'Género',
      'reception.height': 'Altura',
      'reception.weight': 'Peso',
      'reception.details': 'Detalle',
      'reception.sensitive_info': 'Información sensible',
      'reception.rest_wait': 'Reposo/Espera',
      'reception.hospitalization': 'Hospitalización',
      'reception.urgency': 'Urgencia',
      'reception.no_records': 'No se encontraron registros.',
      'reception.export_list': 'EXPORTAR LISTADO',
      'reception.waiting_results': 'Aguarde, aún no hay resultados.',

      // Common table elements
      'table.actions': 'Acciones',
      'table.search': 'Buscar',
      'table.export': 'EXPORTAR LISTADO',
      'table.no_data': 'No se encontraron registros.',
      'table.waiting': 'Aguarde, aún no hay resultados.',
      'table.yes': 'SÍ',
      'table.no': 'NO',
      'table.n_a': 'N/A',
      'table.no_data_available': '(Sin dato)',
      'table.no_report_required': 'NO REQUIERE INFORME',
      'table.authenticated_today': 'Autenticado en el día',
      'table.days_waiting': 'día/s de espera',
      'table.requested': 'Solicitada:',
      'reception.performed': 'Realización:',
      'table.contrast_used': 'Con contraste',
      'table.ambulatory': 'Ambulatorio',
      'table.inpatient': 'Internado',
      'table.urgent': 'Urgente',
      'table.normal': 'Normal',
      'table.duplicate_surname_warning': 'ATENCIÓN: Apellido duplicado.',
      'table.recommended_dose': 'Dósis recomendada',
      'table.contrast_type': 'Tipo de contraste:',
      'table.age_at_study': 'Edad al momento de la realización del estudio',
      'table.flow_state': 'Flujo de estudio',
      'table.date': 'Fecha',
      'table.domain': 'Dominio',
      'table.requester': 'Solicitante:',
      'table.performer': 'Realizador:',
      'table.reporter': 'Informador:',
      'table.study_flow': 'Flujo de estudio',
      'table.edit_study': 'Editar estudio',
      'table.receive_another': 'Recepcionar otro estudio con la misma cita',
      'table.receive': 'Recepcionar',
      'table.sent_to_mwl': 'Enviado a MWL:',
      'table.send_to_mwl': 'Enviar a MWL',
      'table.edit_report': 'Editar informe',
      'table.review_report': 'Revisar informe',
      'table.view_report': 'Ver informe',
      'table.edit_warning': 'Editar informe (Si realiza cambios sobre este informe se destruiran las firmas actuales)',
      'table.element_logs': 'Logs del elemento',
      'table.appointment_pdf': 'PDF de cita',
      'table.study_request': 'Solicitud de estudio',

      // Appointments
      'appointments.title': 'Listado de citas',
      'appointments.search': 'Buscar',
      'appointments.date_range': 'Seleccione rango de fechas',
      'appointments.flow_state': 'Flujo del elemento',
      'appointments.modality': 'Modalidad',
      'appointments.status': 'Estado',
      'appointments.urgency': 'Urgencia',
      'appointments.actions': 'Acciones',
      'appointments.appointment_flow': 'Flujo de cita',
      'appointments.date': 'Fecha',
      'appointments.schedule': 'Horario',
      'appointments.documents': 'Documentos',
      'appointments.names': 'Nombres',
      'appointments.surnames': 'Apellidos',
      'appointments.age': 'Edad',
      'appointments.details': 'Detalle',
      'appointments.hospitalization': 'Hospitalización',
      'appointments.domain': 'Dominio',
      'appointments.no_records': 'No se encontraron registros.',
      'appointments.export_list': 'EXPORTAR LISTADO',
      'appointments.waiting_results': 'Aguarde, aún no hay resultados.',
      'appointments.overbooking_tooltip': 'Esta cita fue sobreagendada.',
      'appointments.age_tooltip': 'Edad al momento de la realización del estudio',
      'appointments.ambulatory': 'Ambulatorio',
      'appointments.inpatient': 'Internado',
      'appointments.urgent': 'Urgente',
      'appointments.normal': 'Normal',
      'appointments.active': 'Activo',
      'appointments.inactive': 'Inactivo',
      'appointments.requester': 'Solicitante:',
      'appointments.performer': 'Realizador:',
      'appointments.reporter': 'Informador:',
      'appointments.no_data': '(Sin dato)',
      'appointments.edit': 'Editar',
      'appointments.element_logs': 'Logs del elemento',
      'appointments.appointment_pdf': 'PDF de cita',
      'appointments.mail_forward': 'Reenvío de correos',
      'appointments.study_request': 'Solicitud de estudio',

      // Users
      'users.title': 'Listado de usuarios',
      'users.search': 'Buscar',
      'users.status': 'Estado',
      'users.total': 'Total:',
      'users.showing': 'Mostrados:',
      'users.page': 'Página',
      'users.of': 'de',
      'users.items_per_page': 'Items por página:',
      'users.actions': 'Acciones',
      'users.documents': 'Documentos',
      'users.names': 'Nombres',
      'users.surnames': 'Apellidos',
      'users.birth_date': 'Fecha Nac.',
      'users.email': 'Correo',
      'users.phones': 'Teléfonos',
      'users.roles': 'Roles',
      'users.gender': 'Género',
      'users.type': 'Tipo',
      'users.no_records': 'No se encontraron registros.',
      'users.export_list': 'EXPORTAR LISTADO',
      'users.waiting_results': 'Aguarde, aún no hay resultados.',
      'users.create_account': 'Crear cuenta',
      'users.add_user': 'Agregar usuario',
      'users.edit_user': 'Editar usuario',
      'users.delete_user': 'Eliminar usuario',
      'users.user_details': 'Detalles del usuario',
      'users.active': 'Activo',
      'users.inactive': 'Inactivo',
      'users.male': 'Masculino',
      'users.female': 'Femenino',
      'users.other': 'Otro',
      'users.organization': 'Organización',
      'users.branch': 'Sucursal',
      'users.service': 'Servicio',
      'users.superuser': 'Superusuario',
      'users.administrator': 'Administrador',
      'users.supervisor': 'Supervisor',
      'users.doctor': 'Médico',
      'users.technician': 'Técnico',
      'users.nurse': 'Enfermero',
      'users.coordinator': 'Coordinador',
      'users.receptionist': 'Recepcionista',
      'users.patient': 'Paciente',
      'users.functional': 'Funcional',
      'users.human': 'Humano',
      'users.machine': 'Máquina',
      'users.element_logs': 'Logs del elemento',

      // Requests
      'requests.title': 'Listado de solicitudes',
      'requests.search': 'Buscar',
      'requests.flow_state': 'Flujo del elemento',
      'requests.modality': 'Modalidad',
      'requests.urgency': 'Urgencia',
      'requests.actions': 'Acciones',
      'requests.request_flow': 'Flujo de solicitud',
      'requests.date': 'Fecha',
      'requests.document': 'Documento',
      'requests.names': 'Nombres',
      'requests.surnames': 'Apellidos',
      'requests.age': 'Edad',
      'requests.gender': 'Género',
      'requests.phones': 'Teléfonos',
      'requests.details': 'Detalle',
      'requests.requesting_institution': 'Institución Solicitante',
      'requests.performing_institution': 'Institución realizadora',
      'requests.no_records': 'No se encontraron registros.',
      'common.no_records_found': 'No se encontraron registros.',
      'requests.export_list': 'EXPORTAR LISTADO',
      'requests.waiting_results': 'Aguarde, aún no hay resultados.',
      'requests.select_all_tooltip': 'Seleccionar todos (Página actual)',
      'requests.edit': 'Editar',
      'requests.element_logs': 'Logs del elemento',
      'requests.request_details': 'Detalles de la solicitud',
      'requests.create_appointment': 'Crear cita a partir de la solicitud',
      'requests.age_tooltip': 'Edad al momento de realizar la solicitud del estudio',
      'requests.urgent': 'Urgente',
      'requests.normal': 'Normal',
      'requests.no_data': '(Sin dato)',
      'requests.male': 'Masculino',
      'requests.female': 'Femenino',
      'requests.other': 'Otro',

      // Request Flow States
      'flow_state.administration': 'Administración',
      'flow_state.retained_administration': 'Retenida en administración',
      'flow_state.medical_area': 'Área médica',
      'flow_state.retained_medical_area': 'Retenida en área médica',
      'flow_state.appointment_in_progress': 'Cita en curso creada',
      'flow_state.appointment_created': 'Cita creada',
      'flow_state.cancelled': 'Cancelada',

      // Performing Flow States
      'flow_state.reception': 'Recepción',
      'flow_state.interview': 'Entrevista',
      'flow_state.preparation_injection': 'Preparación/Inyección',
      'flow_state.acquisition': 'Adquisición',
      'flow_state.image_verification': 'Verificación de imágenes',
      'flow_state.to_report': 'Para informar',
      'flow_state.draft_report': 'Informe borrador',
      'flow_state.signed_report': 'Informe firmado',
      'flow_state.completed_with_report': 'Terminado (con informe)',
      'flow_state.completed_without_report': 'Terminado (sin informe)',

      // Slots
      'slots.title': 'Listado de turnos',
      'slots.search': 'Buscar',
      'slots.date_range': 'Seleccione rango de fechas',
      'slots.modality': 'Modalidad',
      'slots.urgency': 'Urgencia',
      'slots.actions': 'Acciones',
      'slots.organization': 'Organización',
      'slots.branch': 'Sucursal',
      'slots.service': 'Servicio',
      'slots.day': 'Día',
      'slots.date': 'Fecha',
      'slots.schedule': 'Horario',
      'slots.equipment': 'Equipamiento',
      'slots.no_records': 'No se encontraron registros.',
      'slots.export_list': 'EXPORTAR LISTADO',
      'slots.waiting_results': 'Aguarde, aún no hay resultados.',
      'slots.select_all_tooltip': 'Seleccionar todos (Página actual)',
      'slots.edit': 'Editar',
      'slots.element_logs': 'Logs del elemento',
      'slots.urgent': 'Urgente',
      'slots.normal': 'Normal',
      'slots.no_data': '(Sin dato)',

      // Receptions (Check-in)
      'receptions.title': 'Recepción de pacientes',
      'receptions.search': 'Buscar',
      'receptions.select_date': 'Seleccione fecha',
      'receptions.modality': 'Modalidad',
      'receptions.number': 'Nº',
      'receptions.actions': 'Acciones',
      'receptions.schedule': 'Horario',
      'receptions.documents': 'Documentos',
      'receptions.names': 'Nombres',
      'receptions.surnames': 'Apellidos',
      'receptions.age': 'Edad',
      'receptions.gender': 'Género',
      'receptions.height': 'Altura',
      'receptions.weight': 'Peso',
      'receptions.details': 'Detalle',
      'receptions.sensitive_info': 'Información sensible',
      'receptions.rest_wait': 'Reposo/Espera',
      'receptions.hospitalization': 'Hospitalización',
      'receptions.urgency': 'Urgencia',
      'receptions.check_in': 'Recepcionar',
      'receptions.check_in_another': 'Recepcionar otro estudio con la misma cita',
      'receptions.sent_to_mwl': 'Enviado a MWL',
      'receptions.send_to_mwl': 'Enviar a MWL',
      'receptions.waiting_results': 'Aguarde, aún no hay resultados.',
      'receptions.export_list': 'EXPORTAR LISTADO',
      'receptions.no_data': '(Sin dato)',
      'receptions.yes': 'SÍ',
      'receptions.no': 'NO',
      'receptions.active': 'Activo',
      'receptions.inactive': 'Inactivo',
      'receptions.age_tooltip': 'Edad al momento de la realización del estudio',
      'receptions.outpatient': 'Ambulatorio',
      'receptions.inpatient': 'Internado',
      'receptions.urgent': 'Urgente',
      'receptions.normal': 'Normal',

      // Studies (Performing)
      'studies.title': 'Listado de estudios',
      'studies.search': 'Buscar',
      'studies.date_range': 'Seleccione rango de fechas',
      'studies.flow_state': 'Flujo del elemento',
      'studies.modality': 'Modalidad',
      'studies.status': 'Estado',
      'studies.urgency': 'Urgencia',
      'studies.actions': 'Acciones',
      'studies.study_flow': 'Flujo de estudio',
      'studies.date': 'Fecha',
      'studies.report_control': 'Control informe',
      'studies.time': 'Hora',
      'studies.reception': 'recepción',
      'studies.documents': 'Documentos',
      'studies.names': 'Nombres',
      'studies.surnames': 'Apellidos',
      'studies.age': 'Edad',
      'studies.details': 'Detalle',
      'studies.hospitalization': 'Hospitalización',
      'studies.domain': 'Dominio',
      'studies.no_records': 'No se encontraron registros.',
      'studies.export_list': 'EXPORTAR LISTADO',
      'studies.waiting_results': 'Aguarde, aún no hay resultados.',
      'studies.assigned_to_user': 'Este estudio se encuentra asignado al usuario',
      'studies.not_assigned_to_user': 'Este estudio NO se encuentra asignado al usuario, pero es visible debido a su acceso (dominio)',
      'studies.no_reporter_assigned': 'Este estudio NO posee ningún usuario informador asignado, es posible que el mismo no requira informe. Aún así es visible debido a su acceso (dominio)',
      'studies.no_data': '(Sin dato)',
      'studies.active': 'Activo',
      'studies.inactive': 'Inactivo',
      'studies.urgent': 'Urgente',
      'studies.normal': 'Normal',
      'studies.outpatient': 'Ambulatorio',
      'studies.inpatient': 'Internado',
      'studies.associated_files': 'Archivos asociados',
      'studies.email_forwarding': 'Reenvío de correos',
      'studies.create_report': 'Crear informe',
      'studies.edit_report': 'Editar informe',
      'studies.review_report': 'Revisar informe',
      'studies.view_report': 'Ver informe',
      'studies.view_images': 'Ver imágenes',
      'studies.edit_report_warning': 'Editar informe (Si realiza cambios sobre este informe se destruiran las firmas actuales)',
      'studies.procedure_no_report': 'El procedimiento de este estudio NO requiere ser informado.',
      'studies.authenticated': 'Autenticado',
      'studies.authenticated_today': 'Autenticado en el día',
      'studies.days_waiting': 'día/s de espera',
      'studies.required_before': 'Requerido antes de:',
      'studies.referring': 'Solicitante',
      'studies.imaging': 'Realizador',
      'studies.reporting': 'Informador'
    };
    
    // English translations
    this.translations['en'] = {
      // Common
      'common.save': 'Save',
      'common.cancel': 'Cancel',
      'common.delete': 'Delete',
      'common.edit': 'Edit',
      'common.add': 'Add',
      'common.search': 'Search',
      'common.loading': 'Loading...',
      'common.yes': 'Yes',
      'common.no': 'No',
      'common.close': 'Close',
      'common.back': 'Back',
      'common.next': 'Next',
      'common.previous': 'Previous',
      'common.submit': 'Submit',
      'common.reset': 'Reset',
      'common.select': 'Select',
      'common.actions': 'Actions',
      'common.date': 'Date',
      'common.time': 'Time',
      'common.name': 'Name',
      'common.description': 'Description',
      'common.status': 'Status',
      'common.settings': 'Settings',
      'common.language': 'Language',
      'common.generate_batch': 'Generate batch',
      'common.view_current_appointments': 'View current appointments',
      'common.add_machine_user': 'Add machine user',
      'common.search_criteria': 'Search criteria [RegEx]',
      'common.date_range': 'Select date range',
      'common.start_date': 'Start date',
      'common.end_date': 'End date',
      'common.select_organization': 'Select organization',
      'common.clear_search': 'CLEAR SEARCH',
      
      // Authentication
      'auth.login': 'Login',
      'auth.logout': 'Logout',
      'auth.username': 'Username',
      'auth.password': 'Password',
      'auth.document': 'Document',
      'auth.enter_document': 'Enter your document',
      'auth.enter_password': 'Enter your password',
      'auth.document_country': 'Document Country',
      'auth.document_type': 'Document Type',
      'auth.remember_me': 'Remember me',
      'auth.forgot_password': 'Forgot password',
      
      // Document Types
      'doc_type.national_id': 'National ID (DNI, CI, CURP, RUT)',
      'doc_type.passport': 'Passport',
      'doc_type.civic_credential': 'Civic Credential',
      'doc_type.drivers_license': 'Driver\'s License',
      'doc_type.residence_permit': 'Residence Permit',
      'doc_type.visa': 'Visa',
      'doc_type.temporary_document': 'Temporary Document',
      'doc_type.anonymous_document': 'Anonymous Document',

      // User Roles
      'role.superuser': 'Superuser',
      'role.administrator': 'Administrator',
      'role.supervisor': 'Supervisor',
      'role.doctor': 'Doctor',
      'role.technician': 'Technician',
      'role.nurse': 'Nurse',
      'role.coordinator': 'Coordinator',
      'role.receptionist': 'Receptionist',
      'role.patient': 'Patient',
      'role.functional': 'Functional',

      // Navigation
      'nav.main_menu': 'Main Menu',
      'nav.coordination': 'Coordination',
      'nav.requests': 'Requests',
      'nav.slots': 'Slots',
      'nav.appointments': 'Appointments',
      'nav.calendar': 'Calendar',
      'nav.reception': 'Reception',
      'nav.receptions': 'Receptions',
      'nav.realization': 'Realization',
      'nav.studies': 'Studies',
      'nav.advanced_functions': 'Advanced Functions',
      'nav.advanced_search': 'Advanced Search',
      'nav.statistics': 'Statistics',
      'nav.medical_locker': 'Medical Locker',
      'nav.billing': 'Billing',
      'nav.administrator': 'Administrator',
      'nav.system_configuration': 'System Configuration',
      'nav.study_results': 'Study Results',
      'nav.dashboard': 'Dashboard',
      'nav.patients': 'Patients',
      'nav.reports': 'Reports',
      'nav.administration': 'Administration',
      'nav.performing': 'Performing',
      'nav.check_in': 'Check-In',
      'nav.organizations': 'Organizations',
      'nav.branches': 'Branches',
      'nav.services': 'Services',
      'nav.modalities': 'Modalities',
      'nav.equipments': 'Equipment',
      'nav.procedures': 'Procedures',
      'nav.procedure_categories': 'Procedure Categories',
      'nav.pathologies': 'Pathologies',
      'nav.users': 'User Accounts',
      'nav.files': 'Files',

      // Welcome Page
      'welcome.title': 'Welcome to Sirius RIS',
      'welcome.about': 'About',
      'welcome.description': 'Sirius RIS is an open-source radiological information system that was developed thanks to the following technologies.',
      'welcome.help': 'Help',
      'welcome.documentation': 'Official documentation on GitHub & DockerHub',
      'welcome.support': 'Official support service',
      'welcome.features.simple': 'Simple, efficient and fast',
      'welcome.features.robust': 'Robust, secure and auditable',
      'welcome.features.interface': 'Opaque interface to respect radiological environments',
      'welcome.features.identification': 'Unequivocal identification of people | ISO-3166 | UNAOID/ICAO v1.0',
      'welcome.features.privileges': 'Scalable privilege system for users',
      
      // Messages
      'message.success': 'Operation successful',
      'message.error': 'An error has occurred',
      'message.warning': 'Warning',
      'message.info': 'Information',
      'message.confirm_delete': 'Are you sure you want to delete this item?',
      
      // System
      'system.configuration': 'System Configuration',
      'system.user_settings': 'User Settings',
      'system.language_settings': 'Language Settings',
      'system.description': 'The following configurations affect records throughout the entire data flow and the operation mode of the Sirius RIS application.',
      'system.warning': 'If you are not sure about the operation to perform, we recommend that you consult with qualified personnel for this task.',

      // Billing
      'billing.title': 'Billing List',
      'billing.search': 'Search',
      'billing.date_range': 'Select date range',
      'billing.flow_state': 'Element flow',
      'billing.modality': 'Modality',
      'billing.status': 'Status',
      'billing.urgency': 'Urgency',
      'billing.actions': 'Actions',
      'billing.completed': 'Completed',
      'billing.completion_date': 'Completion date',
      'billing.report_date': 'Report date',
      'billing.days_elapsed': 'Days elapsed',
      'billing.documents': 'Documents',
      'billing.names': 'Names',
      'billing.surnames': 'Surnames',
      'billing.details': 'Details',
      'billing.contrast': 'Contrast',
      'billing.anesthesia': 'Anesthesia',
      'billing.requester': 'Requester',
      'billing.no_records': 'No records found.',
      'billing.export_list': 'EXPORT LIST',
      'billing.waiting_results': 'Please wait, no results yet.',

      // Advanced Search
      'advanced_search.title': 'Advanced report search',
      'advanced_search.search': 'Search',
      'advanced_search.date_range': 'Select date range',
      'advanced_search.flow_state': 'Element flow',
      'advanced_search.modality': 'Modality',
      'advanced_search.keywords': 'Search keywords:',
      'advanced_search.anamnesis': 'APPOINTMENT Anamnesis:',
      'advanced_search.anamnesis_keyword': 'Search word in anamnesis',
      'advanced_search.report_content': 'In the REPORT content:',
      'advanced_search.clinical_data': 'Clinical data:',
      'advanced_search.clinical_keyword': 'Word in clinical data',
      'advanced_search.findings': 'Findings:',
      'advanced_search.findings_keyword': 'Word in findings',
      'advanced_search.procedure': 'Procedure:',
      'advanced_search.procedure_keyword': 'Word in procedure',
      'advanced_search.summary': 'In summary:',
      'advanced_search.summary_keyword': 'Word in summary',
      'advanced_search.pathologies': 'REPORT Pathologies:',
      'advanced_search.pathology_list': 'Pathologies:',
      'advanced_search.no_pathology_filter': 'No pathology filter',
      'advanced_search.pathology_admin': 'Pathology Administrator Organization:',
      'advanced_search.organization': 'Organization',
      'advanced_search.involved_doctors': 'Involved doctors:',
      'advanced_search.requesting_doctor': 'REQUESTING Doctor:',
      'advanced_search.doctor_name': 'First/Last name of the requesting doctor',
      'advanced_search.signature_auth': 'About REPORT SIGNATURE and AUTHENTICATION:',
      'advanced_search.signed_by': 'Signed by:',
      'advanced_search.select_signer': 'Select signing user',
      'advanced_search.signer': 'Signing user',
      'advanced_search.authenticated_by': 'Authenticated by:',
      'advanced_search.select_authenticator': 'Select authenticating user',
      'advanced_search.authenticator': 'Authenticating user',

      // Check-in/Reception
      'reception.title': 'Patient reception',
      'reception.search': 'Search',
      'reception.select_date': 'Select date',
      'reception.modality': 'Modality',
      'reception.number': 'No.',
      'reception.actions': 'Actions',
      'reception.schedule': 'Schedule',
      'reception.documents': 'Documents',
      'reception.names': 'Names',
      'reception.surnames': 'Surnames',
      'reception.age': 'Age',
      'reception.gender': 'Gender',
      'reception.height': 'Height',
      'reception.weight': 'Weight',
      'reception.details': 'Details',
      'reception.sensitive_info': 'Sensitive information',
      'reception.rest_wait': 'Rest/Wait',
      'reception.hospitalization': 'Hospitalization',
      'reception.urgency': 'Urgency',
      'reception.no_records': 'No records found.',
      'reception.export_list': 'EXPORT LIST',
      'reception.waiting_results': 'Please wait, no results yet.',

      // Common table elements
      'table.actions': 'Actions',
      'table.search': 'Search',
      'table.export': 'EXPORT LIST',
      'table.no_data': 'No records found.',
      'table.waiting': 'Please wait, no results yet.',
      'table.yes': 'YES',
      'table.no': 'NO',
      'table.n_a': 'N/A',
      'table.no_data_available': '(No data)',
      'table.no_report_required': 'NO REPORT REQUIRED',
      'table.authenticated_today': 'Authenticated today',
      'table.days_waiting': 'day/s waiting',
      'table.requested': 'Requested:',
      'reception.performed': 'Performed:',
      'table.contrast_used': 'With contrast',
      'table.ambulatory': 'Ambulatory',
      'table.inpatient': 'Inpatient',
      'table.urgent': 'Urgent',
      'table.normal': 'Normal',
      'table.duplicate_surname_warning': 'WARNING: Duplicate surname.',
      'table.recommended_dose': 'Recommended dose',
      'table.contrast_type': 'Contrast type:',
      'table.age_at_study': 'Age at the time of study performance',
      'table.flow_state': 'Study flow',
      'table.date': 'Date',
      'table.domain': 'Domain',
      'table.requester': 'Requester:',
      'table.performer': 'Performer:',
      'table.reporter': 'Reporter:',
      'table.study_flow': 'Study flow',
      'table.edit_study': 'Edit study',
      'table.receive_another': 'Receive another study with the same appointment',
      'table.receive': 'Receive',
      'table.sent_to_mwl': 'Sent to MWL:',
      'table.send_to_mwl': 'Send to MWL',
      'table.edit_report': 'Edit report',
      'table.review_report': 'Review report',
      'table.view_report': 'View report',
      'table.edit_warning': 'Edit report (If you make changes to this report, current signatures will be destroyed)',
      'table.element_logs': 'Element logs',
      'table.appointment_pdf': 'Appointment PDF',
      'table.study_request': 'Study request',

      // Appointments
      'appointments.title': 'Appointments List',
      'appointments.search': 'Search',
      'appointments.date_range': 'Select date range',
      'appointments.flow_state': 'Element flow',
      'appointments.modality': 'Modality',
      'appointments.status': 'Status',
      'appointments.urgency': 'Urgency',
      'appointments.actions': 'Actions',
      'appointments.appointment_flow': 'Appointment flow',
      'appointments.date': 'Date',
      'appointments.schedule': 'Schedule',
      'appointments.documents': 'Documents',
      'appointments.names': 'Names',
      'appointments.surnames': 'Surnames',
      'appointments.age': 'Age',
      'appointments.details': 'Details',
      'appointments.hospitalization': 'Hospitalization',
      'appointments.domain': 'Domain',
      'appointments.no_records': 'No records found.',
      'appointments.export_list': 'EXPORT LIST',
      'appointments.waiting_results': 'Please wait, no results yet.',
      'appointments.overbooking_tooltip': 'This appointment was overbooked.',
      'appointments.age_tooltip': 'Age at the time of study performance',
      'appointments.ambulatory': 'Ambulatory',
      'appointments.inpatient': 'Inpatient',
      'appointments.urgent': 'Urgent',
      'appointments.normal': 'Normal',
      'appointments.active': 'Active',
      'appointments.inactive': 'Inactive',
      'appointments.requester': 'Requester:',
      'appointments.performer': 'Performer:',
      'appointments.reporter': 'Reporter:',
      'appointments.no_data': '(No data)',
      'appointments.edit': 'Edit',
      'appointments.element_logs': 'Element logs',
      'appointments.appointment_pdf': 'Appointment PDF',
      'appointments.mail_forward': 'Mail forwarding',
      'appointments.study_request': 'Study request',

      // Users
      'users.title': 'Users List',
      'users.search': 'Search',
      'users.status': 'Status',
      'users.total': 'Total:',
      'users.showing': 'Showing:',
      'users.page': 'Page',
      'users.of': 'of',
      'users.items_per_page': 'Items per page:',
      'users.actions': 'Actions',
      'users.documents': 'Documents',
      'users.names': 'Names',
      'users.surnames': 'Surnames',
      'users.birth_date': 'Birth Date',
      'users.email': 'Email',
      'users.phones': 'Phones',
      'users.roles': 'Roles',
      'users.gender': 'Gender',
      'users.type': 'Type',
      'users.no_records': 'No records found.',
      'users.export_list': 'EXPORT LIST',
      'users.waiting_results': 'Please wait, no results yet.',
      'users.create_account': 'Create account',
      'users.add_user': 'Add user',
      'users.edit_user': 'Edit user',
      'users.delete_user': 'Delete user',
      'users.user_details': 'User details',
      'users.active': 'Active',
      'users.inactive': 'Inactive',
      'users.male': 'Male',
      'users.female': 'Female',
      'users.other': 'Other',
      'users.organization': 'Organization',
      'users.branch': 'Branch',
      'users.service': 'Service',
      'users.superuser': 'Superuser',
      'users.administrator': 'Administrator',
      'users.supervisor': 'Supervisor',
      'users.doctor': 'Doctor',
      'users.technician': 'Technician',
      'users.nurse': 'Nurse',
      'users.coordinator': 'Coordinator',
      'users.receptionist': 'Receptionist',
      'users.patient': 'Patient',
      'users.functional': 'Functional',
      'users.human': 'Human',
      'users.machine': 'Machine',
      'users.element_logs': 'Element logs',

      // Requests
      'requests.title': 'Requests List',
      'requests.search': 'Search',
      'requests.flow_state': 'Element flow',
      'requests.modality': 'Modality',
      'requests.urgency': 'Urgency',
      'requests.actions': 'Actions',
      'requests.request_flow': 'Request flow',
      'requests.date': 'Date',
      'requests.document': 'Document',
      'requests.names': 'Names',
      'requests.surnames': 'Surnames',
      'requests.age': 'Age',
      'requests.gender': 'Gender',
      'requests.phones': 'Phones',
      'requests.details': 'Details',
      'requests.requesting_institution': 'Requesting Institution',
      'requests.performing_institution': 'Performing Institution',
      'requests.no_records': 'No records found.',
      'common.no_records_found': 'No records found.',
      'requests.export_list': 'EXPORT LIST',
      'requests.waiting_results': 'Please wait, no results yet.',
      'requests.select_all_tooltip': 'Select all (Current page)',
      'requests.edit': 'Edit',
      'requests.element_logs': 'Element logs',
      'requests.request_details': 'Request details',
      'requests.create_appointment': 'Create appointment from request',
      'requests.age_tooltip': 'Age at the time of study request',
      'requests.urgent': 'Urgent',
      'requests.normal': 'Normal',
      'requests.no_data': '(No data)',
      'requests.male': 'Male',
      'requests.female': 'Female',
      'requests.other': 'Other',

      // Request Flow States
      'flow_state.administration': 'Administration',
      'flow_state.retained_administration': 'Retained in administration',
      'flow_state.medical_area': 'Medical area',
      'flow_state.retained_medical_area': 'Retained in medical area',
      'flow_state.appointment_in_progress': 'Appointment in progress created',
      'flow_state.appointment_created': 'Appointment created',
      'flow_state.cancelled': 'Cancelled',

      // Performing Flow States
      'flow_state.reception': 'Reception',
      'flow_state.interview': 'Interview',
      'flow_state.preparation_injection': 'Preparation/Injection',
      'flow_state.acquisition': 'Acquisition',
      'flow_state.image_verification': 'Image verification',
      'flow_state.to_report': 'To report',
      'flow_state.draft_report': 'Draft report',
      'flow_state.signed_report': 'Signed report',
      'flow_state.completed_with_report': 'Completed (with report)',
      'flow_state.completed_without_report': 'Completed (without report)',

      // Slots
      'slots.title': 'Slots List',
      'slots.search': 'Search',
      'slots.date_range': 'Select date range',
      'slots.modality': 'Modality',
      'slots.urgency': 'Urgency',
      'slots.actions': 'Actions',
      'slots.organization': 'Organization',
      'slots.branch': 'Branch',
      'slots.service': 'Service',
      'slots.day': 'Day',
      'slots.date': 'Date',
      'slots.schedule': 'Schedule',
      'slots.equipment': 'Equipment',
      'slots.no_records': 'No records found.',
      'slots.export_list': 'EXPORT LIST',
      'slots.waiting_results': 'Please wait, no results yet.',
      'slots.select_all_tooltip': 'Select all (Current page)',
      'slots.edit': 'Edit',
      'slots.element_logs': 'Element logs',
      'slots.urgent': 'Urgent',
      'slots.normal': 'Normal',
      'slots.no_data': '(No data)',

      // Receptions (Check-in)
      'receptions.title': 'Patient Reception',
      'receptions.search': 'Search',
      'receptions.select_date': 'Select date',
      'receptions.modality': 'Modality',
      'receptions.number': 'No.',
      'receptions.actions': 'Actions',
      'receptions.schedule': 'Schedule',
      'receptions.documents': 'Documents',
      'receptions.names': 'Names',
      'receptions.surnames': 'Surnames',
      'receptions.age': 'Age',
      'receptions.gender': 'Gender',
      'receptions.height': 'Height',
      'receptions.weight': 'Weight',
      'receptions.details': 'Details',
      'receptions.sensitive_info': 'Sensitive information',
      'receptions.rest_wait': 'Rest/Wait',
      'receptions.hospitalization': 'Hospitalization',
      'receptions.urgency': 'Urgency',
      'receptions.check_in': 'Check-in',
      'receptions.check_in_another': 'Check-in another study with the same appointment',
      'receptions.sent_to_mwl': 'Sent to MWL',
      'receptions.send_to_mwl': 'Send to MWL',
      'receptions.waiting_results': 'Please wait, no results yet.',
      'receptions.export_list': 'EXPORT LIST',
      'receptions.no_data': '(No data)',
      'receptions.yes': 'YES',
      'receptions.no': 'NO',
      'receptions.active': 'Active',
      'receptions.inactive': 'Inactive',
      'receptions.age_tooltip': 'Age at the time of study performance',
      'receptions.outpatient': 'Outpatient',
      'receptions.inpatient': 'Inpatient',
      'receptions.urgent': 'Urgent',
      'receptions.normal': 'Normal',

      // Studies (Performing)
      'studies.title': 'Studies List',
      'studies.search': 'Search',
      'studies.date_range': 'Select date range',
      'studies.flow_state': 'Element flow',
      'studies.modality': 'Modality',
      'studies.status': 'Status',
      'studies.urgency': 'Urgency',
      'studies.actions': 'Actions',
      'studies.study_flow': 'Study flow',
      'studies.date': 'Date',
      'studies.report_control': 'Report control',
      'studies.time': 'Time',
      'studies.reception': 'reception',
      'studies.documents': 'Documents',
      'studies.names': 'Names',
      'studies.surnames': 'Surnames',
      'studies.age': 'Age',
      'studies.details': 'Details',
      'studies.hospitalization': 'Hospitalization',
      'studies.domain': 'Domain',
      'studies.no_records': 'No records found.',
      'studies.export_list': 'EXPORT LIST',
      'studies.waiting_results': 'Please wait, no results yet.',
      'studies.assigned_to_user': 'This study is assigned to the user',
      'studies.not_assigned_to_user': 'This study is NOT assigned to the user, but is visible due to your access (domain)',
      'studies.no_reporter_assigned': 'This study does NOT have any reporting user assigned, it may not require a report. Still visible due to your access (domain)',
      'studies.no_data': '(No data)',
      'studies.active': 'Active',
      'studies.inactive': 'Inactive',
      'studies.urgent': 'Urgent',
      'studies.normal': 'Normal',
      'studies.outpatient': 'Outpatient',
      'studies.inpatient': 'Inpatient',
      'studies.associated_files': 'Associated files',
      'studies.email_forwarding': 'Email forwarding',
      'studies.create_report': 'Create report',
      'studies.edit_report': 'Edit report',
      'studies.review_report': 'Review report',
      'studies.view_report': 'View report',
      'studies.view_images': 'View images',
      'studies.edit_report_warning': 'Edit report (If you make changes to this report, current signatures will be destroyed)',
      'studies.procedure_no_report': 'The procedure for this study does NOT require reporting.',
      'studies.authenticated': 'Authenticated',
      'studies.authenticated_today': 'Authenticated today',
      'studies.days_waiting': 'day/s waiting',
      'studies.required_before': 'Required before:',
      'studies.referring': 'Referring',
      'studies.imaging': 'Performing',
      'studies.reporting': 'Reporting'
    };
  }
}
